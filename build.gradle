plugins {
    id 'org.jetbrains.intellij' version '0.4.16'
    id 'scala'
}

group 'zio.intellij'
version '2019.3.0.3'

repositories {
    mavenCentral()
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version '2019.3'
    plugins 'org.intellij.scala:2019.3.23', 'java'
}

dependencies {
    compile project(':testrunner_2.12')
    compile project(':testrunner_2.13')
    compileOnly 'org.scala-lang:scala-library:2.12.10'
    testCompileOnly 'org.scala-lang:scala-library:2.12.10'
}

// do not change, this is needed for the test runner copy hack
// it will be fixed at some point.
jar {
    archiveName = "zio-intellij.jar"
}

patchPluginXml {
    sinceBuild '201'
    untilBuild '201.*'
    changeNotes """
    <p>What's new in this version?</p>
    <strong>Bug fixes</strong>:
    <ul>
    <li>Fixed an issue where the test runner didn't work on JDK 1.8 (<a href=https://github.com/zio/zio-intellij/issues/29>#29</a>)
    </ul>
      """
}